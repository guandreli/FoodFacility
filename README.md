## FoodFacility.Api

This project was automatically generated by StackSpot.

## Execution of the created project

After creating the project, access the directory where it was created and run the following command:

```bash
dotnet restore FoodFacility.Api.sln
```

Also build the project, using the command below:

```bash
dotnet build FoodFacility.Api.sln
```

Run the unit and integration tests using the command below:

```bash
dotnet test FoodFacility.Api.sln
```

To test the application, still in the directory, run the following command:

```bash
dotnet run --project ./src/FoodFacility.Api/FoodFacility.Api.csproj
```

Then open http://localhost:5000 in your browser.

### Docker Configuration

For Docker to work, you will need to add a temporary SSL certificate and mount a volume to hold that certificate.
You can find it on [Microsoft Docs](https://docs.microsoft.com/en-us/aspnet/core/security/docker-https?view=aspnetcore-6.0) que descrevem as etapas necessárias para Windows, macOS e Linux.

For Windows:
The following will need to be run from your terminal to create a certificate:

```bash
dotnet dev-certs https -ep %USERPROFILE%\.aspnet\https\aspnetapp.pfx -p Your_password123
dotnet dev-certs https --trust
```

NOTE: When using PowerShell, replace %USERPROFILE% with $env:USERPROFILE.

FOR macOS:
```bash
dotnet dev-certs https -ep ${HOME}/.aspnet/https/aspnetapp.pfx -p Your_password123
dotnet dev-certs https --trust
```

FOR Linux:
```bash
dotnet dev-certs https -ep ${HOME}/.aspnet/https/aspnetapp.pfx -p Your_password123
dotnet dev-certs https --trust
```

To build and run docker containers, run the command below in the solution root where you find the docker-compose.yml file
 ```bash
 docker-compose -f 'docker-compose.yml' up --build
 ```

 . You can also use Visual Studio's "Docker Compose" for debugging purposes. Then open http://localhost:5000 in your browser.

## Overview

### FoodFacility.Domain

Contains all domain layer-specific entities, enumerations, exceptions, interfaces, types, and logic.

### FoodFacility.Application

This layer contains all the api logic. It is dependent on the domain layer, but has no dependencies on any other layer or project. This layer defines interfaces that are implemented by external layers. For example, if the application needs to access a notification service, a new interface will be added to the application and an implementation will be created in the infrastructure.

### FoodFacility.Infrastructure

This layer contains classes for accessing external resources such as file systems, web services, smtp, and so on. These classes must be based on interfaces defined in the application layer.

### FoodFacility.Api

This layer is an ASP.NET Core 5 application. This layer depends on the Application and Infrastructure layers, however the infrastructure dependency is only to support dependency injection. Therefore, only *Startup.cs* should reference the infrastructure.

### Components Used

- [AutoMapper](https://automapper.org/)
- [FluentAssertions](https://github.com/fluentassertions/fluentassertions)
- [FluentValidation](https://fluentvalidation.net/)
- [MediatR](https://github.com/jbogard/MediatR)
- [Moq](https://github.com/moq/moq4)
- [Shouldly](https://github.com/shouldly/shouldly)
- [WireMock.Net](https://github.com/WireMock-Net/WireMock.Net)
- [xunit](https://github.com/xunit/xunit)

## References
- [Clean Architecture: descubra o que é e onde aplicar Arquitetura Limpa](https://www.zup.com.br/blog/clean-architecture-arquitetura-limpa)
- [Clean Architecture with ASP.NET Core 3.0 • Jason Taylor • GOTO 2019](https://www.youtube.com/watch?v=dK4Yb6-LxAk)

## Critique

- What would you have done differently if you had spent more time on this?
    - The way I get the facility by address
    - some architecture options for example change Refit to another lib, or not use StackSpot at base of my project
    - Implement service to get facilities by latitude and longitude
- What are the trade-offs you might have made?
    - Maybe change Clean Architecture to Hexagonal Architecture
- What are the things you left out?
    - I left out the search for latitude and longitude, time is up and was I not able to finish it
- What are the problems with your implementation and how would you solve them if we had to scale the application to a large number of users?
    - In a large scale my application will soffer on search by address. I don't know if it's the best solution, but I would show the results asynchronously as they were obtained.